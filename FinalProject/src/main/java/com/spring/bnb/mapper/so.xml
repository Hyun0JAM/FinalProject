<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="cso">
<resultMap type="HashMap" id="getMyCouponList">
	<!-- <result property="mycp_idx" column="mycp_idx" javaType="String" /> -->
	<result property="cpcode" column="fk_cpcode" javaType="String" />
	<result property="userid" column="fk_userid" javaType="String" />
	<result property="dcmoney" column="dcmoney" javaType="String" />
	<result property="cpexpire" column="cpexpire" javaType="String" />
	<result property="cpname" column="cpname" javaType="String" />
	<result property="usedate" column="usedate" javaType="String" />
</resultMap>

<select id="getMyCoupon" parameterType="String" resultMap="getMyCouponList">
		select mycp_idx,fk_cpcode,cpname,cpexpire,dcmoney,fk_userid,usedate
		from myCoupon A join coupon B
		on A.fk_cpcode = B.cpcode
		where fk_userid=#{loginuser}
		order by mycp_idx
</select>
<select id="getMyInfo" parameterType="String" resultType="com.spring.bnb.model.MemberVO">

	select userid,username,pwd,email,phone,post,addr,detailaddr
        ,gender,to_char(birthday,'yyyy-mm-dd') AS birthday,introduction,memberstatus,profileimg,warncount,regdate
	from member
	where memberstatus =1 and userid = #{loginuser}
</select>
</mapper>	